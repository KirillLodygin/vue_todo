import{_ as V,x as oe,z as ne,c as ie,L as de,a as Q,u as ue}from"./Bq_7dxGS.js";import{d as A,r as B,t as k,v as b,x as v,y as O,K as $,A as t,z as l,B as n,L as J,M as re,i as z,N as ce,O as d,P as fe,Q as Y,R as K,S as ve,T as pe,U as M,J as me,m as j}from"./DCQOYHCu.js";import{_ as Z,a as G,b as W,c as X,d as ee,e as te,f as le,g as se,h as ae}from"./O31xpwSp.js";const ke={key:0,class:"flex justify-start gap-x-3 mb-5"},ge={key:1},Te={class:"flex justify-end gap-x-3"},ye=A({__name:"TaskTitle",props:{newTitle:{},oldTitle:{}},emits:["updateNewTitle"],setup(h,{emit:c}){const f=h,w=B(!0),g=B(f.oldTitle.toUpperCase()||""),T=c,s=()=>{T("updateNewTitle",""),w.value=!0},i=()=>{w.value=!1},o=()=>{T("updateNewTitle",g.value),w.value=!0};return(_,u)=>{const N=V,D=Z,U=G;return k(),b("div",null,[w.value?(k(),b("div",ke,[v("h2",null,O(_.newTitle.toUpperCase()||_.oldTitle.toUpperCase()),1),v("div",null,[_.newTitle.length?(k(),$(N,{key:1,variant:"outline",size:"xs",onClick:s},{default:t(()=>u[2]||(u[2]=[n(" Cancel Editing ")])),_:1})):(k(),$(N,{key:0,variant:"outline",size:"xs",onClick:i},{default:t(()=>u[1]||(u[1]=[n(" Edit ")])),_:1}))])])):(k(),b("div",ge,[v("div",null,[l(D,{for:"name",class:"mb-5"},{default:t(()=>u[3]||(u[3]=[n("New todo name")])),_:1}),l(U,{id:"name",modelValue:g.value,"onUpdate:modelValue":u[0]||(u[0]=E=>g.value=E),type:"text",class:"mb-5",placeholder:"Your new todo name"},null,8,["modelValue"])]),v("div",Te,[l(N,{variant:"default",onClick:s},{default:t(()=>u[4]||(u[4]=[n(" Cancel ")])),_:1}),l(N,{variant:"secondary",onClick:o},{default:t(()=>u[5]||(u[5]=[n(" Done! ")])),_:1})])]))])}}});function _e(h,c){return k(),b("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:"currentColor"})])}const xe=A({__name:"Checkbox",props:J({defaultChecked:{type:Boolean},checked:{type:[Boolean,String]},disabled:{type:Boolean},required:{type:Boolean},name:{},value:{},id:{},asChild:{type:Boolean},as:{},class:{},modelValue:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:J(["update:checked","update:modelValue"],["update:modelValue"]),setup(h,{emit:c}){const f=h,w=c;re(h,"modelValue");const g=z(()=>{const{class:s,...i}=f;return i}),T=oe(g,w);return(s,i)=>(k(),$(d(de),fe(d(T),{checked:f.modelValue,"onUpdate:checked":i[0]||(i[0]=o=>w("update:modelValue",o)),class:d(ie)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",f.class)}),{default:t(()=>[l(d(ne),{class:"flex h-full w-full items-center justify-center text-current"},{default:t(()=>[ce(s.$slots,"default",{},()=>[l(d(_e),{class:"h-4 w-4"})])]),_:3})]),_:3},16,["checked","class"]))}}),we={class:"mb-5"},Ce={class:"max-h-[650px] overflow-y-auto"},Ie={class:"flex justify-between items-center mb-3"},be={key:0,class:"w-2/3"},Be={class:"flex justify-end gap-x-3"},he={key:1,class:"flex justify-start gap-x-3"},Ne={class:"mb-6 w-3/4 mx-auto"},Se={class:"flex items-center justify-between"},$e={key:0},Ve={class:"mb-5"},je={class:"flex justify-end gap-x-3"},De=A({__name:"Tasks",props:{tasksInStore:{},tasks:{}},emits:["deleteTaskPermanently","setNewTaskTitle","createTask"],setup(h,{emit:c}){const f=h,{cloneDeep:w}=Q,g=c,T=B(!1),s=B(!1),i=B(""),o=B(null),_=Y(w(f.tasks.map(a=>({id:a.id,label:a.task.split(". ").splice(1).join(". ")})))),u=B(null),N=z(()=>{const a=f.tasks.filter(I=>I.task.split(". ").splice(1).join(". ")).map(I=>I.id);console.log(a);const e=[];return a.forEach(I=>{const L=f.tasksInStore.findIndex(m=>m.id===I),C=f.tasks.findIndex(m=>m.id===I);L!==-1&&C!==-1&&f.tasksInStore[L].task.split(". ").splice(1).join(". ")!==f.tasks[C].task.split(". ").splice(1).join(". ")&&e.push(I)}),e}),D=a=>{T.value=!0,o.value=a},U=()=>{T.value=!1},E=()=>{if(o.value){g("deleteTaskPermanently",o.value);const a=_.findIndex(e=>e.id===o.value);_.splice(a,1)}o.value=null,T.value=!1},P=z(()=>{if(console.log("taskById editTaskId.value ",u.value),u.value){const a=_.findIndex(e=>e.id===u.value);if(console.log("index ",a),a!==-1)return _[a]}return null}),F=a=>{u.value=a},R=()=>{u.value=null},q=a=>{g("setNewTaskTitle",a,"")},H=()=>{const a=_.findIndex(e=>e.id===u.value);a!==-1&&g("setNewTaskTitle",u.value,_[a].label),u.value=null},p=()=>{s.value=!1},r=()=>{s.value=!0},y=a=>{a.preventDefault(),i.value=""},x=a=>{a.preventDefault(),_.push({id:f.tasks[f.tasks.length-1].id+1,label:i.value}),g("createTask",{id:f.tasks[f.tasks.length-1].id+1,task:`${f.tasks.length+1}. ${i.value}`,isDone:!1}),i.value=""};return(a,e)=>{const I=Z,L=G,C=V;return k(),b(K,null,[v("div",we,[e[8]||(e[8]=v("h2",{class:"mb-2 text-lg font-bold"},"TASKS IN TODO",-1)),v("div",Ce,[(k(!0),b(K,null,ve(a.tasks,m=>(k(),b("div",{key:m.id},[v("div",Ie,[u.value&&u.value===m.id?(k(),b("div",be,[v("div",null,[l(I,{for:"name",class:"mb-5"},{default:t(()=>e[2]||(e[2]=[n("Edit task")])),_:1}),l(L,{id:"name",modelValue:P.value.label,"onUpdate:modelValue":e[0]||(e[0]=S=>P.value.label=S),type:"text",class:"w-full px-2 mb-5",placeholder:"Edit task"},null,8,["modelValue"])]),v("div",Be,[l(C,{variant:"default",onClick:R},{default:t(()=>e[3]||(e[3]=[n(" Cancel ")])),_:1}),l(C,{variant:"secondary",onClick:H},{default:t(()=>e[4]||(e[4]=[n(" Done! ")])),_:1})])])):(k(),b("div",he,[l(d(xe),{modelValue:m.isDone,"onUpdate:modelValue":S=>m.isDone=S,id:m.id},null,8,["modelValue","onUpdate:modelValue","id"]),l(I,{for:m.id},{default:t(()=>[n(O(m.task.split(". ").splice(1).join(". ")?m.task.split(". ").splice(1).join(". "):a.tasksInStore.filter(S=>S.id===m.id)[0].task.split(". ").splice(1).join(". ")),1)]),_:2},1032,["for"])])),v("div",null,[N.value.includes(m.id)?(k(),$(C,{key:0,variant:"outline",size:"xs",onClick:S=>q(m.id)},{default:t(()=>e[5]||(e[5]=[n(" Cancel Editing ")])),_:2},1032,["onClick"])):M("",!0),l(C,{variant:"outline",size:"xs",onClick:S=>F(m.id)},{default:t(()=>e[6]||(e[6]=[n("editTask")])),_:2},1032,["onClick"]),l(C,{variant:"outline",size:"xs",class:"text-red-700",onClick:S=>D(m.id)},{default:t(()=>e[7]||(e[7]=[n("deleteTask")])),_:2},1032,["onClick"])])])]))),128))])]),v("div",Ne,[v("div",Se,[e[11]||(e[11]=v("h2",{class:"text-lg mr-5"},"Create new task",-1)),v("div",null,[s.value?(k(),$(C,{key:0,variant:"default",onClick:p},{default:t(()=>e[9]||(e[9]=[n("Hide")])),_:1})):(k(),$(C,{key:1,variant:"destructive",onClick:r},{default:t(()=>e[10]||(e[10]=[n(" Show! ")])),_:1}))])]),l(pe,{"enter-active-class":"duration-300 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:t(()=>[s.value?(k(),b("div",$e,[v("form",null,[v("div",Ve,[l(I,{for:"name"},{default:t(()=>e[12]||(e[12]=[n("New task")])),_:1}),l(L,{id:"name",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=m=>i.value=m),type:"text",placeholder:"New task"},null,8,["modelValue"])]),v("div",je,[l(C,{variant:"default",onClick:y},{default:t(()=>e[13]||(e[13]=[n(" Cancel ")])),_:1}),l(C,{variant:"secondary",disabled:!i.value.length,onClick:x},{default:t(()=>e[14]||(e[14]=[n(" Create! ")])),_:1},8,["disabled"])])])])):M("",!0)]),_:1})]),l(d(ae),{open:T.value},{default:t(()=>[l(d(W),{class:"sm:max-w-md"},{default:t(()=>[l(d(X),null,{default:t(()=>[l(d(ee),null,{default:t(()=>e[15]||(e[15]=[n("Delete task ?")])),_:1}),l(d(te),null,{default:t(()=>e[16]||(e[16]=[n(" Are you sure you want to delete task? ")])),_:1})]),_:1}),l(d(le),{class:"sm:justify-start"},{default:t(()=>[l(d(se),{"as-child":""},{default:t(()=>[l(d(V),{onClick:U,type:"button",variant:"default"},{default:t(()=>e[17]||(e[17]=[n(" No ")])),_:1}),l(d(V),{onClick:E,type:"button",variant:"secondary"},{default:t(()=>e[18]||(e[18]=[n(" Ok ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])],64)}}}),Ue={class:"flex justify-start gap-x-2 mb-5"},Ee={class:"w-full sm:w-11/12 md:w-10/12 2xl:w-3/4 mx-auto"},Oe=A({__name:"index",setup(h){const c=ue(),{cloneDeep:f,isEqual:w}=Q,g=B(!1),T=B(!1),s=z(()=>c.openTodoId),i=B(""),o=Y(s.value?f(c.getTodoById(s.value).tasks):[]),_=z(()=>s.value&&i.value&&c.getTodoById(s.value).title!==i.value||s.value&&!w(o,c.getTodoById(s.value).tasks));me(()=>{const p=new URL(window.location.href),r=p.pathname.split("/")[p.pathname.split("/").length-1],y=localStorage.getItem("todoList")||"",x=localStorage.getItem("todoId");if(y.length){if(c.setTodoList(y),x&&x===r){s.value||c.updateOpenTodoId(Number(r)),o.length||f(c.getTodoById(Number(r)).tasks).forEach(a=>{o.push(a)});return}j("/todo_list");return}j("/")});const u=()=>{g.value=!0},N=()=>{g.value=!1,T.value&&(T.value=!1,j("/todo_list/"))},D=()=>{_.value&&s.value&&(c.updateTodo(s.value,i.value,o),T.value=!1,i.value="")},U=()=>{if(T.value&&s.value){c.updateTodo(s.value,i.value,o),g.value=!1,i.value="",localStorage.setItem("todoId",""),j("/todo_list/");return}s.value&&c.deleteTodo(s.value),g.value=!1,localStorage.setItem("todoId",""),j("/todo_list/")},E=()=>{if(s.value&&!w(o,c.getTodoById(s.value).tasks)&&o.forEach(p=>{!p.task.split(". ").splice(1).join(". ")&&s.value&&(p.task=p.task.split(". ")[0]+". "+c.getTodoById(s.value).tasks.filter(r=>r.id===p.id)[0].task.split(". ").splice(1).join(". "))}),s.value&&i.value&&c.getTodoById(s.value).title!==i.value||s.value&&!w(o,c.getTodoById(s.value).tasks)){T.value=!0,g.value=!0;return}localStorage.setItem("todoId",""),j("/todo_list/")},P=p=>{i.value=p},F=p=>{const r=o.findIndex(y=>y.id===p);r!==-1&&(o.splice(r,1),o.forEach((y,x)=>{const a=y.task.split(". ");a[0]=`${x+1}`,y.task=a.join(". ")}))},R=(p,r)=>{const y=o.findIndex(x=>x.id===p);y!==-1&&(o.forEach(x=>{x.task=x.task.split(". ").splice(1).join(". ")}),o[y].task=r,o.forEach((x,a)=>{x.task=`${a+1}. ${x.task}`}))},q=()=>{s.value&&(i.value="",o.splice(0,o.length),c.getTodoById(s.value).tasks.forEach(p=>{o.push(f(p))}))},H=p=>{o.push(p)};return(p,r)=>{const y=V;return k(),b("div",null,[v("div",Ue,[l(y,{variant:"ghost",size:"xs",class:"text-red-700 mb-4",onClick:u},{default:t(()=>r[0]||(r[0]=[n(" Delete todo ")])),_:1}),_.value?(k(),$(y,{key:0,variant:"destructive",size:"xs",class:"mb-4",onClick:D},{default:t(()=>r[1]||(r[1]=[n(" Save сhanges ")])),_:1})):M("",!0),_.value?(k(),$(y,{key:1,variant:"default",size:"xs",class:"mb-4",onClick:q},{default:t(()=>r[2]||(r[2]=[n(" Undo сhanges ")])),_:1})):M("",!0),l(y,{variant:"ghost",size:"xs",class:"mb-4",onClick:E},{default:t(()=>r[3]||(r[3]=[n(" Return ")])),_:1})]),v("div",Ee,[l(ye,{"new-title":i.value,"old-title":s.value?d(c).getTodoById(s.value).title:"",onUpdateNewTitle:P},null,8,["new-title","old-title"]),l(De,{onDeleteTaskPermanently:F,onSetNewTaskTitle:R,onCreateTask:H,"tasks-in-store":s.value?d(c).getTodoById(s.value).tasks:[],tasks:o},null,8,["tasks-in-store","tasks"]),l(d(ae),{open:g.value},{default:t(()=>[l(d(W),{class:"sm:max-w-md"},{default:t(()=>[l(d(X),null,{default:t(()=>[l(d(ee),null,{default:t(()=>[n(O(T.value?"Changes not saved!":"Delete todo?"),1)]),_:1}),l(d(te),null,{default:t(()=>[n(O(T.value?"Do you want to save changes?":"Are you sure you want to delete todo?"),1)]),_:1})]),_:1}),l(d(le),{class:"sm:justify-start"},{default:t(()=>[l(d(se),{"as-child":""},{default:t(()=>[l(d(V),{onClick:N,type:"button",variant:"default"},{default:t(()=>r[4]||(r[4]=[n(" No ")])),_:1}),l(d(V),{onClick:U,type:"button",variant:"secondary"},{default:t(()=>r[5]||(r[5]=[n(" Ok ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])])}}});export{Oe as default};
